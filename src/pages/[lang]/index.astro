---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LanguageSwitcher from '../../components/LanguageSwitcher.astro';
import Hero from '../../components/Hero';
import { I18nextProvider } from 'react-i18next';
import { locales, resolveLocale } from '../../i18n/config';
import { createI18nInstance } from '../../i18n/i18next';

export function getStaticPaths() {
  return locales.map((lang) => ({ params: { lang } }));
}

const locale = resolveLocale(Astro.params.lang);
const i18n = await createI18nInstance(locale);
const t = i18n.getFixedT(locale);
const year = new Date().getFullYear();
---
<BaseLayout lang={locale} title={t('meta.title')} description={t('meta.description')}>
  <LanguageSwitcher slot="nav" activeLocale={locale} />

  <I18nextProvider i18n={i18n}>
    <Hero />
  </I18nextProvider>

  <p slot="footer">{t('footer.note', { year })}</p>
</BaseLayout>
